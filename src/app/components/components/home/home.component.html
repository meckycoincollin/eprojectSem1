
<div class="loading-container" *ngIf="loading">
  <div class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Loading...</span>
  </div>
  <p>Loading amazing cares...</p>
</div>

<div class="alert alert-danger" *ngIf="error">
  {{ error }}
</div>

<div *ngIf="!loading && !error" >
  <div class="main-banner ">
  <div class="owl-carousel owl-banner">
    
    <!-- Premium Cars -->
    <div class="item item-1">
      <div class="header-text">
        <span class="category">Premium <em>Cars</em></span>
        <h2>Discover Comfort<br>and Cutting-Edge Luxury</h2>
        <div class="banner-button">
          <a href="javascript:void(0)" (click)="navigateToCategory('premium')">
            Explore Premium
          </a>
        </div>
      </div>
    </div>

    <!-- Sports Cars -->
    <div class="item item-2">
      <div class="header-text">
        <span class="category">Sports <em>Cars</em></span>
        <h2>Feel the Thrill<br>Performance Meets Design</h2>
        <div class="banner-button">
          <a href="javascript:void(0)" (click)="navigateToCategory('sports')">
            Explore Sports
          </a>
        </div>
      </div>
    </div>

    <!-- Supercars -->
    <div class="item item-3">
      <div class="header-text">
        <span class="category">Super<em>cars</em></span>
        <h2>Experience Extreme<br>Power & Exclusivity</h2>
        <div class="banner-button">
          <a href="javascript:void(0)" (click)="navigateToCategory('super')">
            Explore Supercars
          </a>
        </div>
      </div>
    </div>

  </div>
</div>


  <!-- About Us Section -->
  <div class="featured section">
    <div class="container">
      <div class="row">
        <div class="col-lg-4">
          <div class="left-image">
            <img src="assets/images/featured-car.jpg" alt="Featured car" height="300px">
          </div>
        </div>
        <div class="col-lg-5">
          <div class="section-heading">
            <h6>| About Us</h6>
            <h2>{{ companyInfo?.name || 'Alberto car Company' }} - {{ companyInfo?.slogan || 'Excellence in Timekeeping' }}</h2>
          </div>
          <div class="accordion" id="accordionExample">
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingOne">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                  Our Story
                </button>
              </h2>
              <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  {{ companyInfo?.description || 'Alberto car Company is a full-service car repair, appraisal, and retail store offering the finest selection of luxury timepieces. Founded with a passion for exceptional craftsmanship, we provide an unparalleled selection with first-class service.' }}
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  Our Services
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  We offer comprehensive <strong>car repair services</strong>, professional appraisals, and an extensive collection of premium cares. Our certified carmakers can restore even the most complex timepieces to their original condition with precision and care.
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header" id="headingThree">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  Our Brands
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                <div class="accordion-body">
                  We carry a wide selection of brand new cares such as <strong>BMW, Audi, Huyndai, Kia, Suzuki</strong> and more. Each piece in our collection represents the pinnacle of carmaking excellence.
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3">
          <div class="info-table">
  <ul>
    <li>
      <div class="icon-container">
        <i class="fas fa-tools"></i>
      </div>
      <h4>Expert Service<br><span>Certified Technicians</span></h4>
    </li>
    <li>
      <div class="icon-container">
        <i class="fas fa-car"></i>
      </div>
      <h4>Vehicle Appraisal<br><span>Trusted Valuation</span></h4>
    </li>
    <li>
      <div class="icon-container">
        <i class="fas fa-car-side"></i>
      </div>
      <h4>Wide Selection<br><span>Premium & Performance Cars</span></h4>
    </li>
    <li>
      <div class="icon-container">
        <i class="fas fa-shield-alt"></i>
      </div>
      <h4>Warranty<br><span>Guaranteed Quality & Support</span></h4>
    </li>
  </ul>
</div>

        </div>
      </div>
    </div>
  </div>

  <!-- Craftsmanship Section -->
  <div class="video section">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 offset-lg-4">
          <div class="section-heading text-center">
          <h6>| Innovation & Excellence</h6>
          <h2>The Art of Performance Cars</h2>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="video-content">
    <div class="container">
      <div class="row">
        <div class="col-lg-10 offset-lg-1">
          <div class="video-frame">
            <img src="assets/images/carrioshowroom.jpg" alt="carmaking Process">
            <a href="https://youtube.com" target="_blank"><i class="fa fa-play"></i></a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Statistics Section -->
  <div class="fun-facts">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="wrapper">
            <div class="row">
              <div class="col-lg-4">
                <div class="counter">
                  <h2 class="timer count-title count-number" 
                      [attr.data-to]="statistics?.yearsInBusiness || 25" 
                      data-speed="1000"></h2>
                  <p class="count-text ">Years<br>of Excellence</p>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="counter">
                  <h2 class="timer count-title count-number" 
                      [attr.data-to]="statistics?.caresRepaired || 15000" 
                      data-speed="1000"></h2>
                  <p class="count-text ">cares<br>Repaired</p>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="counter">
                  <h2 class="timer count-title count-number" 
                      [attr.data-to]="statistics?.brandsAvailable || 500" 
                      data-speed="1000"></h2>
                  <p class="count-text ">Premium Brands<br>Available</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Collections Section with Tabs -->
  <div class="section best-deal">
    <div class="container">
      <div class="row">
        <div class="col-lg-4">
          <div class="section-heading">
            <h6>| Collections</h6>
            <h2>Discover Our Exclusive Collections</h2>
          </div>
        </div>
        <div class="col-lg-12">
          <div class="tabs-content">
            <div class="row">
              <div class="nav-wrapper ">
                <ul class="nav nav-tabs" role="tablist">
                  <li class="nav-item" role="presentation" *ngFor="let category of categories; let i = index">
                    <button class="nav-link" 
                            [class.active]="i === 0"
                            [id]="category.id + '-tab'" 
                            data-bs-toggle="tab" 
                            [attr.data-bs-target]="'#' + category.id" 
                            type="button" 
                            role="tab" 
                            [attr.aria-controls]="category.id" 
                            [attr.aria-selected]="i === 0">{{ category.name }}</button>
                  </li>
                </ul>
              </div>              
              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade" 
                     *ngFor="let category of categories; let i = index"
                     [class.show]="i === 0"
                     [class.active]="i === 0"
                     [id]="category.id" 
                     role="tabpanel" 
                     [attr.aria-labelledby]="category.id + '-tab'">
                  <div class="row">
                    <div class="col-lg-3">
                      <div class="info-table">
                        <ul>
                          <!-- Premium Cars -->
                          <ng-container *ngIf="category.id === 'premium'">
                            <li>Engine <span>V6 / V8 Turbo</span></li>
                            <li>Transmission <span>8-speed Automatic</span></li>
                            <li>Drivetrain <span>AWD / RWD</span></li>
                            <li>Top Speed <span>250–300 km/h</span></li>
                            <li>Warranty <span>3–5 Years</span></li>
                          </ng-container>

                          <!-- Sports Cars -->
                          <ng-container *ngIf="category.id === 'sports'">
                            <li>Engine <span>I4 / V6 Turbo</span></li>
                            <li>0–100 km/h <span>Under 5s</span></li>
                            <li>Chassis <span>Sport-Tuned</span></li>
                            <li>Drivetrain <span>RWD / AWD</span></li>
                            <li>Warranty <span>3 Years</span></li>
                          </ng-container>

                          <!-- Supercars -->
                          <ng-container *ngIf="category.id === 'super'">
                            <li>Engine <span>V8 / V10</span></li>
                            <li>Power <span>600–700+ hp</span></li>
                            <li>0–100 km/h <span>~3s</span></li>
                            <li>Brakes <span>Carbon-Ceramic</span></li>
                            <li>Warranty <span>3 Years</span></li>
                          </ng-container>

                          <!-- Hypercars -->
                          <ng-container *ngIf="category.id === 'hyper'">
                            <li>Engine <span>Hybrid / Electric / V12</span></li>
                            <li>Power <span>1000+ hp</span></li>
                            <li>0–100 km/h <span>Under 2.5s</span></li>
                            <li>Body <span>Carbon Monocoque</span></li>
                            <li>Warranty <span>Limited Production </span></li>
                          </ng-container>
                        </ul>

                      </div>
                    </div>
                    <div class="col-lg-6">
                      <img [src]="'assets/images/categories/' + category.id + '.jpg'" [alt]="category.name">
                    </div>
                    <div class="col-lg-3">
                      <h4>{{ category.name }}</h4>
                      <p>{{ category.description }}</p>
                      <div class="icon-button">
                        <a [routerLink]="['/products']" [queryParams]="{category: category.id}">
                          <i class="fa fa-eye"></i> View Collection
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Featured Products Section -->
  <div class="properties section">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 offset-lg-4">
          <div class="section-heading text-center">
           <h6>| Featured Collections</h6>
          <h2>Discover Our Most Coveted Vehicles</h2>
          </div>
        </div>
      </div>
      <div class="row">
        <!-- Featured car items -->
        <div class="col-lg-4 col-md-6" *ngFor="let car of featuredCars">
          <div class="item">
            <a href="javascript:void(0)" (click)="opencarDetails(car)">
              <img [src]="car.images[0]" [alt]="car.name">
            </a>
            <span class="category">{{ car.categoryId === 'luxury' ? 'Luxury Collection' : 
                                      car.categoryId === 'vintage' ? 'Vintage Collection' : 
                                      'Smart Collection' }}</span>
            <h6>{{ car.discount ? 
                ((car.price * (1 - car.discount/100)) | currency:'USD':'symbol':'1.0-0') : 
                (car.price | currency:'USD':'symbol':'1.0-0') }}</h6>
            <h4><a href="javascript:void(0)" (click)="opencarDetails(car)">{{ car.name }}</a></h4>
            <ul>
              <li *ngIf="car.specifications.movement">Movement: <span>{{ car.specifications.movement }}</span></li>
              <li *ngIf="car.specifications.caseSize">Case Size: <span>{{ car.specifications.caseSize }}</span></li>
              <li *ngIf="car.specifications.waterResistance">Water Resistance: <span>{{ car.specifications.waterResistance }}</span></li>
              <li *ngIf="car.specifications.material">Material: <span>{{ car.specifications.material }}</span></li>
              <li *ngIf="car.specifications.features && car.specifications.features.length > 0">Features: 
                <span>{{ car.specifications.features.join(', ') }}</span>
              </li>
            </ul>
            <div class="main-button">
              <a href="javascript:void(0)" (click)="openCarDetails(car)">View Details</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Contact Section -->
  <div class="contact section">
    <div class="container">
      <div class="row">
        <div class="col-lg-4 offset-lg-4">
          <div class="section-heading text-center">
            <h6>| Contact Us</h6>
            <h2>Get In Touch With Our Experts</h2>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="contact-content">
    <div class="container">
      <div class="row">
        <div class="col-lg-7">
          <div id="map">
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3724.1155335517404!2d105.84115007599775!3d21.02754148052354!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3135ab9b4a79fa85%3A0xd4c01582479b0553!2sHoan%20Kiem%20Lake!5e0!3m2!1sen!2s!4v1684210063387!5m2!1sen!2s" width="100%" height="500px" frameborder="0" style="border:0; border-radius: 10px; box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.15);" allowfullscreen=""></iframe>
          </div>
          <div class="row">
            <div class="col-lg-6">
              <div class="item phone">
                <h6>{{ companyInfo?.contact?.phone || '+84 123 456 7890' }}<br><span>Phone Number</span></h6>
              </div>
            </div>
            <div class="col-lg-6">
              <div class="item email">
                <h6>{{ companyInfo?.contact?.email || 'info@albertoclocks.com' }}<br><span>Business Email</span></h6>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-5">
          <form id="contact-form" [formGroup]="contactForm" (ngSubmit)="onSubmitContactForm()">
            <div class="row">
              <div class="col-lg-12">
                <fieldset>
                  <label for="name">Full Name</label>
                  <input type="text" formControlName="name" id="name" placeholder="Your Name..." autocomplete="on">
                  <div *ngIf="contactForm.get('name').invalid && contactForm.get('name').touched" class="text-danger">
                    Name is required
                  </div>
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <label for="email">Email Address</label>
                  <input type="email" formControlName="email" id="email" placeholder="Your E-mail...">
                  <div *ngIf="contactForm.get('email').invalid && contactForm.get('email').touched" class="text-danger">
                    Valid email is required
                  </div>
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <label for="subject">Subject</label>
                  <input type="text" formControlName="subject" id="subject" placeholder="Subject..." autocomplete="on">
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <label for="message">Message</label>
                  <textarea formControlName="message" id="message" placeholder="Your Message"></textarea>
                  <div *ngIf="contactForm.get('message').invalid && contactForm.get('message').touched" class="text-danger">
                    Message is required
                  </div>
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <button type="submit" id="form-submit" class="orange-button" [disabled]="contactForm.invalid">Send Message</button>
                </fieldset>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<app-product-detail-modal
  [car]="selectedCar"
  [category]="selectedCategory"
  [relatedCars]="relatedCars"
  [loading]="modalLoading"
  (closeModal)="onCloseModal()"
  (viewRelatedcar)="onViewRelatedCar($event)">
</app-product-detail-modal>

